{"version":3,"file":"realm-shim.min.js","sources":["../src/evaluators.js","../src/accessors.js","../src/functions.js","../src/sanitize.js","../src/context.js","../src/stdlib.js","../src/intrinsics.js","../src/tamper-proof.js","../src/deep-freeze.js","../src/utils.js","../src/realm.js","../src/symbols.js","../src/commons.js","../src/handler.js"],"sourcesContent":["// Portions adapted from V8 - Copyright 2016 the V8 project authors.\n// https://github.com/v8/v8/blob/master/src/builtins/builtins-function.cc\n\nimport { GlobalObject, Intrinsics, ContextRec } from './symbols';\nimport { defineProperty, getOwnPropertyDescriptor, setPrototypeOf } from './commons';\nimport { Handler } from './handler';\n\nfunction buildOptimizer(constants) {\n  if (!Array.isArray(constants)) {\n    return '';\n  }\n  if (constants.contains('eval')) throw new Error();\n\n  return `const {${constants.join(',')}} = arguments[0];`;\n}\n\nexport function getDirectEvalEvaluatorFactory(contextRec, constants) {\n  const { contextFunction } = contextRec;\n\n  const optimizer = buildOptimizer(constants);\n\n  // Create a function in sloppy mode that returns\n  // a function in strict mode.\n  return contextFunction(`\n    with (arguments[0]) {\n      ${optimizer}\n      return function() {\n        'use strict';\n        return eval(arguments[0]);\n      };\n    }\n  `);\n}\n\nexport function getDirectEvalEvaluator(realmRec) {\n  const { [ContextRec]: contextRec, [GlobalObject]: globalObject } = realmRec;\n\n  // This proxy has several functions:\n  // 1. works with the sentinel to alternate between direct eval and confined eval.\n  // 2. shadows all properties of the hidden global by declaring them as undefined.\n  // 3. resolves all existing properties of the sandboxed global.\n  const handler = new Handler(contextRec);\n  const proxy = new Proxy(globalObject, handler);\n\n  const scopedEvaluator = contextRec.evalEvaluatorFactory(proxy);\n\n  // Create an eval without a [[Construct]] behavior such that the\n  // invocation \"new eval()\" throws TypeError: eval is not a constructor\".\n  const evaluator = {\n    eval(src) {\n      handler.isInternalEvaluation = true;\n      // Ensure that \"this\" resolves to the secure global.\n      const result = scopedEvaluator.call(globalObject, src);\n      handler.isInternalEvaluation = false;\n      return result;\n    }\n  }.eval;\n\n  // Ensure that eval from any compartment in a root realm is an\n  // instance of Function in any compartment of the same root ralm.\n  const { contextGlobal, contextFunction } = contextRec;\n  setPrototypeOf(evaluator, contextFunction.prototype.constructor);\n\n  defineProperty(evaluator.prototype, contextGlobal.Symbol.toStringTag, {\n    value: 'function eval() { [shim code] }',\n    writable: false,\n    enumerable: false,\n    configurable: true\n  });\n  return evaluator;\n}\n\n/**\n * A safe version of the native Function which relies on\n * the safety of evalEvaluator for confinement.\n */\nexport function getFunctionEvaluator(realmRec) {\n  const { [ContextRec]: contextRec, [Intrinsics]: intrinsics } = realmRec;\n\n  const evaluator = function Function(...params) {\n    const functionBody = params.pop() || '';\n    let functionParams = params.join(',');\n\n    if (functionParams.includes(')')) {\n      // If the formal parameters string include ) - an illegal\n      // character - it may make the combined function expression\n      // compile. We avoid this problem by checking for this early on.\n      throw new Error('Function arg string contains parenthesis');\n    }\n\n    if (functionParams.length > 0) {\n      // If the formal parameters include an unbalanced block comment, the\n      // function must be rejected. Since JavaScript does not allow nested\n      // comments we can include a trailing block comment to catch this.\n      functionParams += '\\n/*``*/';\n    }\n\n    const src = `(function(${functionParams}){\\n${functionBody}\\n})`;\n\n    return intrinsics.eval(src);\n  };\n\n  // Ensure that Function from any compartment in a root realm can be used\n  // with instance checks in any compartment of the same root realm.\n  const { contextGlobal, contextFunction } = contextRec;\n  setPrototypeOf(evaluator, contextFunction.prototype.constructor);\n\n  // Ensure that any function created in any compartment in a root realm is an\n  // instance of Function in any compartment of the same root ralm.\n  const desc = getOwnPropertyDescriptor(evaluator, 'prototype');\n  desc.value = contextFunction.prototype;\n  defineProperty(evaluator, 'prototype', desc);\n\n  // Provide a custom output without overwriting the Function.prototype.toString\n  // which is called by some libraries.\n  defineProperty(evaluator.prototype, contextGlobal.Symbol.toStringTag, {\n    value: 'function Function() { [shim code] }',\n    writable: false,\n    enumerable: false,\n    configurable: true\n  });\n  return evaluator;\n}\n","// Adapted from SES/Caja - Copyright (C) 2011 Google Inc.\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/startSES.js\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/repairES5.js\n\nimport {\n  getPrototypeOf,\n  defineProperty,\n  defineProperties,\n  getOwnPropertyDescriptor\n} from './commons';\n\n/**\n * Replace the legacy accessors of Object to comply with strict mode\n * and ES2016 semantics, we do this by redefining them while in 'use strict'\n * https://tc39.github.io/ecma262/#sec-object.prototype.__defineGetter__\n */\nexport function repairAccessors(contextRec) {\n  const { contextGlobal: g } = contextRec;\n\n  defineProperties(g.Object.prototype, {\n    __defineGetter__: {\n      value(prop, func) {\n        return defineProperty(this, prop, {\n          get: func,\n          enumerable: true,\n          configurable: true\n        });\n      }\n    },\n    __defineSetter__: {\n      value(prop, func) {\n        return defineProperty(this, prop, {\n          set: func,\n          enumerable: true,\n          configurable: true\n        });\n      }\n    },\n    __lookupGetter__: {\n      value(prop) {\n        let base = this;\n        let desc;\n        while (base && !(desc = getOwnPropertyDescriptor(base, prop))) {\n          base = getPrototypeOf(base);\n        }\n        return desc && desc.get;\n      }\n    },\n    __lookupSetter__: {\n      value(prop) {\n        let base = this;\n        let desc;\n        while (base && !(desc = getOwnPropertyDescriptor(base, prop))) {\n          base = getPrototypeOf(base);\n        }\n        return desc && desc.set;\n      }\n    }\n  });\n}\n","// Adapted from SES/Caja\n// Copyright (C) 2011 Google Inc.\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/startSES.js\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/repairES5.js\n\nimport { defineProperty, defineProperties, getPrototypeOf, setPrototypeOf } from './commons';\n\n/**\n * The process to repair constructors:\n * 1. Obtain the prototype from an instance\n * 2. Create a substitute noop constructor\n * 3. Replace its prototype property with the original prototype\n * 4. Replace its prototype property's constructor with itself\n * 5. Replace its [[Prototype]] slot with the noop constructor of Function\n */\nfunction repairFunction(contextRec, functionName, functionDecl) {\n  const { contextEval, contextFunction } = contextRec;\n\n  const FunctionInstance = contextEval(`(${functionDecl}(){})`);\n  const FunctionPrototype = getPrototypeOf(FunctionInstance);\n\n  // Block evaluation of source when calling constructor on the prototype of functions.\n  const TamedFunction = contextFunction('throw new Error(\"Not available\");');\n\n  defineProperties(TamedFunction, {\n    name: {\n      value: functionName\n    },\n    prototype: {\n      value: FunctionPrototype\n    }\n  });\n  defineProperty(FunctionPrototype, 'constructor', { value: TamedFunction });\n\n  // Ensures that all functions meet \"instanceof Function\" in a realm.\n  setPrototypeOf(TamedFunction, contextFunction.prototype.constructor);\n}\n\n/**\n * This block replaces the original Function constructor, and the original\n * %GeneratorFunction% %AsyncFunction% and %AsyncGeneratorFunction%, with\n * safe replacements that preserve SES confinement. After this block is done,\n * the originals should no longer be reachable.\n */\nexport function repairFunctions(contextRec) {\n  const { contextGlobal: g } = contextRec;\n\n  // Here, the order of operation is important: Function needs to be\n  // repaired first since the other constructors need it.\n  repairFunction(contextRec, 'Function', 'function');\n  repairFunction(contextRec, 'GeneratorFunction', 'function*');\n  repairFunction(contextRec, 'AsyncFunction', 'async function');\n\n  const hasAsyncIteration = typeof g.Symbol.asyncIterator !== 'undefined';\n  if (hasAsyncIteration) {\n    repairFunction(contextRec, 'AsyncGeneratorFunction', 'async function*');\n  }\n}\n","import { repairAccessors } from './accessors';\nimport { repairFunctions } from './functions';\n\n// Sanitizing ensures that neither the legacy\n// accessors nor the function constructors can be\n// used to escape the confinement of the evaluators\n// to execute in the context.\n\nexport function sanitize(contextRec) {\n  repairAccessors(contextRec);\n  repairFunctions(contextRec);\n}\n","import { getDirectEvalEvaluatorFactory } from './evaluators';\nimport { sanitize } from './sanitize';\n\n// Detection used in RollupJS.\nconst isNode = typeof exports === 'object' && typeof module !== 'undefined';\nconst vm = isNode ? require('vm') : undefined;\n\nconst contextRecSrc = '({ global: this, eval, Function })';\n\n// The contextRec is shim-specific. It acts as the mechanism\n// to obtain a fresh set of intrinsics together with their\n// associated eval and Function evaluators. This association\n// must be respected since the evaluators are imposing a\n// set of intrinsics, aka the \"undeniables\".\n\nfunction createNodeContext() {\n  const context = vm.runInNewContext(contextRecSrc);\n  return context;\n}\n\nfunction createBrowserContext() {\n  const iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n\n  document.body.appendChild(iframe);\n  const context = iframe.contentWindow.eval(contextRecSrc);\n\n  return context;\n}\n\nconst createContext = isNode ? createNodeContext : createBrowserContext;\n\nexport function createContextRec(context) {\n  if (context === undefined) {\n    context = createContext();\n  }\n\n  const contextRec = {\n    contextGlobal: context.global,\n    contextEval: context.eval,\n    contextFunction: context.Function\n  };\n\n  // Create the evaluator factory that will generate the evaluators\n  // for each compartment realm.\n  contextRec.evalEvaluatorFactory = getDirectEvalEvaluatorFactory(contextRec);\n\n  sanitize(contextRec);\n  return contextRec;\n}\n\n// The current context is the context where the\n// Realm shim is being parsed and executed.\nfunction getCurrentContext() {\n  return (0, eval)(contextRecSrc);\n}\n\nexport function getCurrentContextRec() {\n  const context = getCurrentContext();\n  return createContextRec(context);\n}\n","export function getStdLib(intrinsics) {\n  const i = intrinsics;\n\n  return {\n    // *** 18.1 Value Properties of the Global Object\n\n    Infinity: { value: Infinity },\n    NaN: { value: NaN },\n    undefined: { value: undefined },\n\n    // *** 18.2 Function Properties of the Global Object\n\n    // Make eval writable to allow proxy to return a different\n    // value, and leave it non-unconfigurable to prevent userland\n    // from changing its descriptor and breaking an invariant.\n    eval: { value: i.eval, writable: true },\n    isFinite: { value: i.isFinite },\n    isNaN: { value: i.isNaN },\n    parseFloat: { value: i.parseFloat },\n    parseInt: { value: i.parseInt },\n\n    decodeURI: { value: i.decodeURI },\n    decodeURIComponent: { value: i.decodeURIComponent },\n    encodeURI: { value: i.encodeURI },\n    encodeURIComponent: { value: i.encodeURIComponent },\n\n    // *** 18.3 Constructor Properties of the Global Object\n\n    Array: { value: i.Array },\n    ArrayBuffer: { value: i.ArrayBuffer },\n    Boolean: { value: i.Boolean },\n    DataView: { value: i.DataView },\n    Date: { value: i.Date },\n    Error: { value: i.Error },\n    EvalError: { value: i.EvalError },\n    Float32Array: { value: i.Float32Array },\n    Float64Array: { value: i.Float64Array },\n    Function: { value: i.Function },\n    Int8Array: { value: i.Int8Array },\n    Int16Array: { value: i.Int16Array },\n    Int32Array: { value: i.Int32Array },\n    Map: { value: i.Map },\n    Number: { value: i.Number },\n    Object: { value: i.Object },\n    Promise: { value: i.Promise },\n    Proxy: { value: i.Proxy },\n    RangeError: { value: i.RangeError },\n    ReferenceError: { value: i.ReferenceError },\n    RegExp: { value: i.RegExp },\n    Set: { value: i.Set },\n    // SharedArrayBuffer // Deprecated on Jan 5, 2018\n    String: { value: i.String },\n    Symbol: { value: i.Symbol },\n    SyntaxError: { value: i.SyntaxError },\n    TypeError: { value: i.TypeError },\n    Uint8Array: { value: i.Uint8Array },\n    Uint8ClampedArray: { value: i.Uint8ClampedArray },\n    Uint16Array: { value: i.Uint16Array },\n    Uint32Array: { value: i.Uint32Array },\n    URIError: { value: i.URIError },\n    WeakMap: { value: i.WeakMap },\n    WeakSet: { value: i.WeakSet },\n\n    // *** 18.4 Other Properties of the Global Object\n\n    // Atomics: { value: i.Atomics }, // Deprecated on Jan 5, 2018\n    JSON: { value: i.JSON },\n    Math: { value: i.Math },\n    Reflect: { value: i.Reflect },\n\n    // *** Annex B\n\n    escape: { value: i.escape },\n    unescape: { value: i.unescape },\n\n    // *** ECMA-402\n\n    Intl: { value: i.Intl },\n\n    // *** ESNext\n\n    Realm: { value: i.Realm }\n  };\n}\n","import { getPrototypeOf } from './commons';\n\n/**\n * Get the intrinsics from Table 7 & Annex B\n * Named intrinsics: available as data properties of the global object.\n * Anonymous intrinsics: not otherwise reachable by own property name traversal.\n *\n * https://tc39.github.io/ecma262/#table-7\n * https://tc39.github.io/ecma262/#table-73\n */\nexport function getIntrinsics(contextRec) {\n  const { contextGlobal: g } = contextRec;\n\n  // Anonymous intrinsics.\n\n  const SymbolIterator = g.Symbol.iterator;\n\n  const ArrayIteratorInstance = new g.Array()[SymbolIterator]();\n  const ArrayIteratorPrototype = getPrototypeOf(ArrayIteratorInstance);\n  const IteratorPrototype = getPrototypeOf(ArrayIteratorPrototype);\n\n  const AsyncFunctionInstance = g.eval('(async function(){})');\n  const AsyncFunction = AsyncFunctionInstance.constructor;\n  const AsyncFunctionPrototype = AsyncFunction.prototype;\n\n  const GeneratorFunctionInstance = g.eval('(function*(){})');\n  const GeneratorFunction = GeneratorFunctionInstance.constructor;\n  const Generator = GeneratorFunction.prototype;\n  const GeneratorPrototype = Generator.prototype;\n\n  const hasAsyncIterator = typeof g.Symbol.asyncIterator !== 'undefined';\n\n  const AsyncGeneratorFunctionInstance = hasAsyncIterator && g.eval('(async function*(){})');\n  const AsyncGeneratorFunction = hasAsyncIterator && AsyncGeneratorFunctionInstance.constructor;\n  const AsyncGenerator = hasAsyncIterator && AsyncGeneratorFunction.prototype;\n  const AsyncGeneratorPrototype = hasAsyncIterator && AsyncGenerator.prototype;\n\n  const AsyncIteratorPrototype = hasAsyncIterator && getPrototypeOf(AsyncGeneratorPrototype);\n  const AsyncFromSyncIteratorPrototype = undefined; // Not reacheable.\n\n  const MapIteratorObject = new g.Map()[SymbolIterator]();\n  const MapIteratorPrototype = getPrototypeOf(MapIteratorObject);\n\n  const SetIteratorObject = new g.Set()[SymbolIterator]();\n  const SetIteratorPrototype = getPrototypeOf(SetIteratorObject);\n\n  const StringIteratorObject = new g.String()[SymbolIterator]();\n  const StringIteratorPrototype = getPrototypeOf(StringIteratorObject);\n\n  const ThrowTypeError = g.eval(\n    '(function () { \"use strict\"; return Object.getOwnPropertyDescriptor(arguments, \"callee\").get; })()'\n  );\n\n  const TypedArray = getPrototypeOf(g.Int8Array);\n  const TypedArrayPrototype = TypedArray.prototype;\n\n  // Named intrinsics\n\n  const intrinsics = {\n    // *** Table 7\n\n    // %Array%\n    Array: g.Array,\n    // %ArrayBuffer%\n    ArrayBuffer: g.ArrayBuffer,\n    // %ArrayBufferPrototype%\n    ArrayBufferPrototype: g.ArrayBuffer.prototype,\n    // %ArrayIteratorPrototype%\n    ArrayIteratorPrototype,\n    // %ArrayPrototype%\n    ArrayPrototype: g.Array.prototype,\n    // %ArrayProto_entries%\n    ArrayProto_entries: g.Array.prototype.entries,\n    // %ArrayProto_foreach%\n    ArrayProto_foreach: g.Array.prototype.forEach,\n    // %ArrayProto_keys%\n    ArrayProto_keys: g.Array.prototype.forEach,\n    // %ArrayProto_values%\n    ArrayProto_values: g.Array.prototype.values,\n    // %AsyncFromSyncIteratorPrototype%\n    AsyncFromSyncIteratorPrototype,\n    // %AsyncFunction%\n    AsyncFunction,\n    // %AsyncFunctionPrototype%\n    AsyncFunctionPrototype,\n    // %AsyncGenerator%\n    AsyncGenerator,\n    // %AsyncGeneratorFunction%\n    AsyncGeneratorFunction,\n    // %AsyncGeneratorPrototype%\n    AsyncGeneratorPrototype,\n    // %AsyncIteratorPrototype%\n    AsyncIteratorPrototype,\n    // %Atomics%\n    // Atomics: g.Atomics, // Deprecated on Jan 5, 2018\n    // %Boolean%\n    Boolean: g.Boolean,\n    // %BooleanPrototype%\n    BooleanPrototype: g.Boolean.prototype,\n    // %DataView%\n    DataView: g.DataView,\n    // %DataViewPrototype%\n    DataViewPrototype: g.DataView.prototype,\n    // %Date%\n    Date: g.Date,\n    // %DatePrototype%\n    DatePrototype: g.Date.prototype,\n    // %decodeURI%\n    decodeURI: g.decodeURI,\n    // %decodeURIComponent%\n    decodeURIComponent: g.decodeURIComponent,\n    // %encodeURI%\n    encodeURI: g.encodeURI,\n    // %encodeURIComponent%\n    encodeURIComponent: g.encodeURIComponent,\n    // %Error%\n    Error: g.Error,\n    // %ErrorPrototype%\n    ErrorPrototype: g.Error.prototype,\n    // %eval%\n    eval: g.eval,\n    // %EvalError%\n    EvalError: g.EvalError,\n    // %EvalErrorPrototype%\n    EvalErrorPrototype: g.EvalError.prototype,\n    // %Float32Array%\n    Float32Array: g.Float32Array,\n    // %Float32ArrayPrototype%\n    Float32ArrayPrototype: g.Float32Array.prototype,\n    // %Float64Array%\n    Float64Array: g.Float64Array,\n    // %Float64ArrayPrototype%\n    Float64ArrayPrototype: g.Float64Array.prototype,\n    // %Function%\n    Function: g.Function,\n    // %FunctionPrototype%\n    FunctionPrototype: g.Function.prototype,\n    // %Generator%\n    Generator,\n    // %GeneratorFunction%\n    GeneratorFunction,\n    // %GeneratorPrototype%\n    GeneratorPrototype,\n    // %Int8Array%\n    Int8Array: g.Int8Array,\n    // %Int8ArrayPrototype%\n    Int8ArrayPrototype: g.Int8Array.prototype,\n    // %Int16Array%\n    Int16Array: g.Int16Array,\n    // %Int16ArrayPrototype%,\n    Int16ArrayPrototype: g.Int16Array.prototype,\n    // %Int32Array%\n    Int32Array: g.Int32Array,\n    // %Int32ArrayPrototype%\n    Int32ArrayPrototype: g.Int32Array.prototype,\n    // %isFinite%\n    isFinite: g.isFinite,\n    // %isNaN%\n    isNaN: g.isNaN,\n    // %IteratorPrototype%\n    IteratorPrototype,\n    // %JSON%\n    JSON: g.JSON,\n    // %JSONParse%\n    JSONParse: g.JSON.parse,\n    // %Map%\n    Map: g.Map,\n    // %MapIteratorPrototype%\n    MapIteratorPrototype,\n    // %MapPrototype%\n    MapPrototype: g.Map.prototype,\n    // %Math%\n    Math: g.Math,\n    // %Number%\n    Number: g.Number,\n    // %NumberPrototype%\n    NumberPrototype: g.Number.prototype,\n    // %Object%\n    Object: g.Object,\n    // %ObjectPrototype%\n    ObjectPrototype: g.Object.prototype,\n    // %ObjProto_toString%\n    ObjProto_toString: g.Object.prototype.toString,\n    // %ObjProto_valueOf%\n    ObjProto_valueOf: g.Object.prototype.valueOf,\n    // %parseFloat%\n    parseFloat: g.parseFloat,\n    // %parseInt%\n    parseInt: g.parseInt,\n    // %Promise%\n    Promise: g.Promise,\n    // %Promise_all%\n    Promise_all: g.Promise.all,\n    // %Promise_reject%\n    Promise_reject: g.Promise.reject,\n    // %Promise_resolve%\n    Promise_resolve: g.Promise.resolve,\n    // %PromiseProto_then%\n    PromiseProto_then: g.Promise.prototype.then,\n    // %PromisePrototype%\n    PromisePrototype: g.Promise.prototype,\n    // %Proxy%\n    Proxy: g.Proxy,\n    // %RangeError%\n    RangeError: g.RangeError,\n    // %RangeErrorPrototype%\n    RangeErrorPrototype: g.RangeError.prototype,\n    // %ReferenceError%\n    ReferenceError: g.ReferenceError,\n    // %ReferenceErrorPrototype%\n    ReferenceErrorPrototype: g.ReferenceError.prototype,\n    // %Reflect%\n    Reflect: g.Reflect,\n    // %RegExp%\n    RegExp: g.RegExp,\n    // %RegExpPrototype%\n    RegExpPrototype: g.RegExp.prototype,\n    // %Set%\n    Set: g.Set,\n    // %SetIteratorPrototype%\n    SetIteratorPrototype,\n    // %SetPrototype%\n    SetPrototype: g.Set.prototype,\n    // %SharedArrayBuffer%\n    // SharedArrayBuffer // Deprecated on Jan 5, 2018\n    // %SharedArrayBufferPrototype%\n    // SharedArrayBufferPrototype // Deprecated on Jan 5, 2018\n    // %String%\n    String: g.String,\n    // %StringIteratorPrototype%\n    StringIteratorPrototype,\n    // %StringPrototype%\n    StringPrototype: g.String.prototype,\n    // %Symbol%\n    Symbol: g.Symbol,\n    // %SymbolPrototype%\n    SymbolPrototype: g.Symbol.prototype,\n    // %SyntaxError%\n    SyntaxError: g.SyntaxError,\n    // %SyntaxErrorPrototype%\n    SyntaxErrorPrototype: g.SyntaxError.prototype,\n    // %ThrowTypeError%\n    ThrowTypeError,\n    // %TypedArray%\n    TypedArray,\n    // %TypedArrayPrototype%\n    TypedArrayPrototype,\n    // %TypeError%\n    TypeError: g.TypeError,\n    // %TypeErrorPrototype%\n    TypeErrorPrototype: g.TypeError.prototype,\n    // %Uint8Array%\n    Uint8Array: g.Uint8Array,\n    // %Uint8ArrayPrototype%\n    Uint8ArrayPrototype: g.Uint8Array.prototype,\n    // %Uint8ClampedArray%\n    Uint8ClampedArray: g.Uint8ClampedArray,\n    // %Uint8ClampedArrayPrototype%\n    Uint8ClampedArrayPrototype: g.Uint8ClampedArray.prototype,\n    // %Uint16Array%\n    Uint16Array: g.Uint16Array,\n    // %Uint16ArrayPrototype%\n    Uint16ArrayPrototype: g.Uint16Array.prototype,\n    // %Uint32Array%\n    Uint32Array: g.Uint32Array,\n    // %Uint32ArrayPrototype%\n    Uint32ArrayPrototype: g.Uint32Array.prototype,\n    // %URIError%\n    URIError: g.URIError,\n    // %URIErrorPrototype%\n    URIErrorPrototype: g.URIError.prototype,\n    // %WeakMap%\n    WeakMap: g.WeakMap,\n    // %WeakMapPrototype%\n    WeakMapPrototype: g.WeakMap.prototype,\n    // %WeakSet%\n    WeakSet: g.WeakSet,\n    // %WeakSetPrototype%\n    WeakSetPrototype: g.WeakSet.prototype,\n\n    // *** Annex B\n\n    // %escape%\n    escape: g.escape,\n    // %unescape%\n    unescape: g.unescape,\n\n    // *** ECMA-402\n\n    Intl: g.Intl,\n\n    // *** ESNext\n    Realm: g.Realm\n  };\n\n  return intrinsics;\n}\n","// Adapted from SES/Caja\n// Copyright (C) 2011 Google Inc.\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/startSES.js\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/repairES5.js\n\nimport {\n  defineProperty,\n  getOwnPropertyDescriptor,\n  getOwnPropertyDescriptors,\n  objectHasOwnProperty\n} from './commons';\n\n/**\n * For a special set of properties (defined below), it ensures that the\n * effect of freezing does not suppress the ability to override these\n * properties on derived objects by simple assignment.\n *\n * Because of lack of sufficient foresight at the time, ES5 unfortunately\n * specified that a simple assignment to a non-existent property must fail if\n * it would override a non-writable data property of the same name. (In\n * retrospect, this was a mistake, but it is now too late and we must live\n * with the consequences.) As a result, simply freezing an object to make it\n * tamper proof has the unfortunate side effect of breaking previously correct\n * code that is considered to have followed JS best practices, if this\n * previous code used assignment to override.\n *\n * To work around this mistake, deepFreeze(), prior to freezing, replaces\n * selected configurable own data properties with accessor properties which\n * simulate what we should have specified -- that assignments to derived\n * objects succeed if otherwise possible.\n */\nfunction tamperProof(obj, prop, desc) {\n  if ('value' in desc && desc.configurable) {\n    const value = desc.value;\n\n    // eslint-disable-next-line no-inner-declarations\n    function getter() {\n      return value;\n    }\n\n    // Re-attach the data property on the object so\n    // it can be found by the deep-freeze traversal process.\n    getter.value = value;\n\n    // eslint-disable-next-line no-inner-declarations\n    function setter(newValue) {\n      if (obj === this) {\n        throw new TypeError(`Cannot assign to read only property '${prop}' of object '${obj}'`);\n      }\n      if (objectHasOwnProperty.call(this, prop)) {\n        this[prop] = newValue;\n      } else {\n        defineProperty(this, prop, {\n          value: newValue,\n          writable: true,\n          enumerable: desc.enumerable,\n          configurable: desc.configurable\n        });\n      }\n    }\n\n    defineProperty(obj, prop, {\n      get: getter,\n      set: setter,\n      enumerable: desc.enumerable,\n      configurable: desc.configurable\n    });\n  }\n}\n\nfunction tamperProofProperties(obj) {\n  const descs = getOwnPropertyDescriptors(obj);\n  for (const prop in descs) {\n    const desc = descs[prop];\n    tamperProof(obj, prop, desc);\n  }\n}\n\nfunction tamperProofProperty(obj, prop) {\n  const desc = getOwnPropertyDescriptor(obj, prop);\n  tamperProof(obj, prop, desc);\n}\n\n/**\n * These properties are subject to the override mistake\n * and must be converted before freezing.\n */\nexport function tamperProofDataProperties(intrinsics) {\n  const i = intrinsics;\n\n  [i.ObjectPrototype, i.ArrayPrototype, i.FunctionPrototype].forEach(tamperProofProperties);\n\n  // Intentionally avoid loops and data structures.\n  tamperProofProperty(i.ErrorPrototype, 'message');\n  tamperProofProperty(i.EvalErrorPrototype, 'message');\n  tamperProofProperty(i.RangeErrorPrototype, 'message');\n  tamperProofProperty(i.ReferenceErrorPrototype, 'message');\n  tamperProofProperty(i.SyntaxErrorPrototype, 'message');\n  tamperProofProperty(i.TypeErrorPrototype, 'message');\n  tamperProofProperty(i.URIErrorPrototype, 'message');\n}\n","// Adapted from SES/Caja - Copyright (C) 2011 Google Inc.\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/startSES.js\n// https://github.com/google/caja/blob/master/src/com/google/caja/ses/repairES5.js\n\n// Mitigate proxy-related security issues\n// https://github.com/tc39/ecma262/issues/272\n\nimport { freeze, getOwnPropertyDescriptors, getPrototypeOf, ownKeys } from './commons';\n\n// Objects that are deeply frozen.\nconst frozenSet = new WeakSet();\n\n/**\n * \"deepFreeze()\" acts like \"Object.freeze()\", except that:\n *\n * To deepFreeze an object is to freeze it and all objects transitively\n * reachable from it via transitive reflective property and prototype\n * traversal.\n */\nexport function deepFreeze(node) {\n  // Objects that we have frozen in this round.\n  const freezingSet = new Set();\n\n  // If val is something we should be freezing but aren't yet,\n  // add it to freezingSet.\n  function enqueue(val) {\n    if (Object(val) !== val) {\n      // ignore primitives\n      return;\n    }\n    const type = typeof val;\n    if (type !== 'object' && type !== 'function') {\n      // future proof: break until someone figures out what it should do\n      throw new TypeError(`Unexpected typeof: ${type}`);\n    }\n    if (frozenSet.has(val) || freezingSet.has(val)) {\n      // Ignore if already frozen or freezing\n      return;\n    }\n    freezingSet.add(val);\n  }\n\n  function doFreeze(obj) {\n    // Immediately freeze the object to ensure reactive\n    // objects such as proxies won't add properties\n    // during traversal, before they get frozen.\n\n    // Object are verified before being enqueued,\n    // therefore this is a valid candidate.\n    // Throws if this fails (strict mode).\n    freeze(obj);\n\n    enqueue(getPrototypeOf(obj));\n    const descs = getOwnPropertyDescriptors(obj);\n    ownKeys(descs).forEach(name => {\n      const desc = descs[name];\n      if ('value' in desc) {\n        enqueue(desc.value);\n      } else {\n        enqueue(desc.get);\n        enqueue(desc.set);\n      }\n    });\n  }\n\n  function dequeue() {\n    // New values added before forEach() has finished will be visited.\n    freezingSet.forEach(doFreeze);\n  }\n\n  function commit() {\n    freezingSet.forEach(frozenSet.add, frozenSet);\n  }\n\n  enqueue(node);\n  dequeue();\n  commit();\n}\n","export function assert(condition) {\n  if (!condition) {\n    throw new Error();\n  }\n}\n\nexport function IsCallable(obj) {\n  return typeof obj === 'function';\n}\n","import { createContextRec, getCurrentContextRec } from './context';\nimport { getDirectEvalEvaluator, getFunctionEvaluator } from './evaluators';\nimport { getStdLib } from './stdlib';\nimport { getIntrinsics } from './intrinsics';\nimport { tamperProofDataProperties } from './tamper-proof';\nimport { deepFreeze } from './deep-freeze';\nimport { IsCallable } from './utils';\nimport { assign, create, defineProperty, defineProperties, getPrototypeOf } from './commons';\nimport { Intrinsics, GlobalObject, IsDirectEvalTrap, ContextRec } from './symbols';\n\nconst Realm2RealmRec = new WeakMap();\nconst RealmProto2ContextRec = new WeakMap();\n\nfunction createRealmFacade(contextRec, BaseRealm) {\n  const { contextFunction, contextGlobal } = contextRec;\n\n  // The BaseRealm is the Realm class created by\n  // the shim. It's only valid for the context where\n  // it was parsed.\n\n  // The Realm facade is a lightwwight class built in the\n  // context a different context, that provide a fully\n  // functional Realm class using the intrisics\n  // of that context.\n\n  // This process is simplified becuase all methods\n  // and properties on a realm instance already return\n  // values using the intrinsics of the realm's context.\n\n  // Invoke the BaseRealm constructor with Realm as the prototype.\n  const Realm = contextFunction(\n    'BaseRealm',\n    `\n\nconst descs = Object.getOwnPropertyDescriptors(BaseRealm.prototype);\n\nclass Realm {\n  constructor(options) {\n    return Reflect.construct(BaseRealm, arguments, Realm);\n  }\n  init() {\n    descs.init.value.apply(this);\n  }\n  get intrinsics() {\n    return descs.intrinsics.get.apply(this);\n  }\n  get global() {\n    return descs.global.get.apply(this);\n  }\n  evaluate(x) {\n    return descs.evaluate.value.apply(this, arguments);\n  }\n}\n\nObject.defineProperty(Realm.prototype, Symbol.toStringTag, {\n  value: 'function Realm() { [shim code] }',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\nreturn Realm;\n\n  `\n  )(BaseRealm);\n\n  contextGlobal.Realm = Realm;\n  RealmProto2ContextRec.set(Realm.prototype, contextRec);\n}\n\nfunction getGlobaObject(intrinsics) {\n  return create(intrinsics.ObjectPrototype);\n}\n\nfunction createEvaluators(realmRec) {\n  // Divergence from specifications: the evaluators are tied to\n  // a global and they are tied to a realm and to the intrinsics\n  // of that realm.\n  const directEvalEvaluator = getDirectEvalEvaluator(realmRec);\n  const functionEvaluator = getFunctionEvaluator(realmRec);\n\n  // Limitation: export a direct evaluator.\n  const intrinsics = realmRec[Intrinsics];\n  intrinsics.eval = directEvalEvaluator;\n  intrinsics.Function = functionEvaluator;\n\n  realmRec[IsDirectEvalTrap] = directEvalEvaluator;\n}\n\nfunction setDefaultBindings(realmRec) {\n  const intrinsics = realmRec[Intrinsics];\n  const descs = getStdLib(intrinsics);\n  defineProperties(realmRec[GlobalObject], descs);\n}\n\nexport default class Realm {\n  constructor(options) {\n    const O = this;\n    options = Object(options); // Todo: sanitize\n\n    let contextRec;\n    if (options.intrinsics === 'inherit') {\n      // In \"inherit\" mode, we create a compartment realm and inherit\n      // the context since we share the intrinsics. We create a new\n      // set to allow us to define eval() anf Function() for the realm.\n      contextRec = RealmProto2ContextRec.get(getPrototypeOf(this));\n    } else if (options.intrinsics === undefined) {\n      // When intrinics are not provided, we create a root realm\n      // using the fresh set of new intrinics from a new context.\n      contextRec = createContextRec();\n      createRealmFacade(contextRec, Realm);\n    } else {\n      throw new TypeError('Realm only supports undefined or \"inherited\" intrinsics.');\n    }\n    const intrinsics = getIntrinsics(contextRec);\n    const globalObj = getGlobaObject(intrinsics);\n\n    const realmRec = {\n      [ContextRec]: contextRec,\n      [Intrinsics]: intrinsics,\n      [GlobalObject]: globalObj,\n      [IsDirectEvalTrap]: undefined\n    };\n    Realm2RealmRec.set(O, realmRec);\n\n    const init = O.init;\n    if (!IsCallable(init)) throw new TypeError();\n    init.call(O);\n  }\n  init() {\n    const O = this;\n    if (typeof O !== 'object') throw new TypeError();\n    if (!Realm2RealmRec.has(O)) throw new TypeError();\n    const realmRec = Realm2RealmRec.get(O);\n    createEvaluators(realmRec);\n    setDefaultBindings(realmRec);\n  }\n  get intrinsics() {\n    const O = this;\n    if (typeof O !== 'object') throw new TypeError();\n    if (!Realm2RealmRec.has(O)) throw new TypeError();\n    const realmRec = Realm2RealmRec.get(O);\n    const intrinsics = realmRec[Intrinsics];\n    // The object returned has its prototype\n    // match the ObjectPrototype of the realm.\n    const obj = create(intrinsics.ObjectPrototype);\n    return assign(obj, intrinsics);\n  }\n  get global() {\n    const O = this;\n    if (typeof O !== 'object') throw new TypeError();\n    if (!Realm2RealmRec.has(O)) throw new TypeError();\n    const realmRec = Realm2RealmRec.get(O);\n    return realmRec[GlobalObject];\n  }\n  evaluate(x) {\n    const O = this;\n    if (typeof O !== 'object') throw new TypeError();\n    if (!Realm2RealmRec.has(O)) throw new TypeError();\n    const realmRec = Realm2RealmRec.get(O);\n    const evaluator = realmRec[IsDirectEvalTrap];\n    return evaluator(x);\n  }\n  // This is a temporary addition, currenly being evaluated.\n  freeze() {\n    const O = this;\n    if (typeof O !== 'object') throw new TypeError();\n    if (!Realm2RealmRec.has(O)) throw new TypeError();\n    const realmRec = Realm2RealmRec.get(O);\n\n    // Copy the intrinsics into a plain object to avoid\n    // freezing the object itself.\n    const obj = create(null);\n    const intrinsics = realmRec[Intrinsics];\n    assign(obj, intrinsics);\n    tamperProofDataProperties(obj);\n    deepFreeze(obj);\n  }\n}\n\nRealmProto2ContextRec.set(Realm.prototype, getCurrentContextRec());\n\ndefineProperty(Realm.prototype, Symbol.toStringTag, {\n  value: 'function Realm() { [shim code] }',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n","export const Intrinsics = Symbol('Intrinsics Slot');\nexport const GlobalObject = Symbol('GlobalObject Slot');\nexport const IsDirectEvalTrap = Symbol('IsDirectEvalTrap Slot');\nexport const ContextRec = Symbol('Shim Context');\n","// Declare shorthand functions. Sharing these declarations accross modules\n// improves both consitency and minification. Unused declarations are dropped\n// by the tree shaking process.\n\nexport const {\n  assign,\n  create,\n  defineProperties,\n  freeze,\n  getOwnPropertyDescriptors,\n  getOwnPropertyNames\n} = Object;\n\nexport const {\n  apply,\n  defineProperty,\n  deleteProperty,\n  getOwnPropertyDescriptor,\n  getPrototypeOf,\n  ownKeys,\n  setPrototypeOf\n} = Reflect;\n\nexport const objectHasOwnProperty = Object.prototype.hasOwnProperty;\n","export class Handler {\n  // Properties stored on the handler\n  // are not available from the proxy.\n\n  constructor(contextRec) {\n    const { contextGlobal } = contextRec;\n    this.contextGlobal = contextGlobal;\n\n    // this flag allow us to determine if the eval() call is a controlled\n    // eval done by the realm's code or if it is user-land invocation, so\n    // we can react differently.\n    this.isInternalEvaluation = false;\n  }\n\n  get(target, prop) {\n    // Special treatment for eval.\n    if (prop === 'eval') {\n      if (this.isInternalEvaluation) {\n        this.isInternalEvaluation = false;\n        return this.contextGlobal.eval;\n      }\n      return target.eval;\n    }\n    // Properties of the global.\n    if (prop in target) {\n      return target[prop];\n    }\n    // Prevent the lookup for other properties.\n    return undefined;\n  }\n\n  has(target, prop) {\n    if (prop === 'eval') {\n      return true;\n    }\n    if (prop === 'arguments') {\n      return false;\n    }\n    if (prop in target) {\n      return true;\n    }\n    if (prop in this.contextGlobal) {\n      return true;\n    }\n    return false;\n  }\n}\n"],"names":["Array","isArray","contains","Error","join","contextFunction","Proxy","evalEvaluatorFactory","eval","isInternalEvaluation","call","contextGlobal","prototype","constructor","Symbol","toStringTag","value","writable","enumerable","configurable","pop","includes","length","Object","__defineGetter__","get","__defineSetter__","set","__lookupGetter__","__lookupSetter__","contextEval","name","asyncIterator","global","Function","Infinity","NaN","undefined","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","ArrayBuffer","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Map","Number","Promise","RangeError","ReferenceError","RegExp","Set","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","JSON","Math","Reflect","escape","unescape","Intl","Realm","iterator","ArrayBufferPrototype","ArrayIteratorPrototype","ArrayPrototype","ArrayProto_entries","entries","ArrayProto_foreach","forEach","ArrayProto_keys","ArrayProto_values","values","AsyncFromSyncIteratorPrototype","AsyncFunction","AsyncFunctionPrototype","AsyncGenerator","AsyncGeneratorFunction","AsyncGeneratorPrototype","AsyncIteratorPrototype","BooleanPrototype","DataViewPrototype","DatePrototype","ErrorPrototype","EvalErrorPrototype","Float32ArrayPrototype","Float64ArrayPrototype","FunctionPrototype","Generator","GeneratorFunction","GeneratorPrototype","Int8ArrayPrototype","Int16ArrayPrototype","Int32ArrayPrototype","IteratorPrototype","JSONParse","parse","MapIteratorPrototype","MapPrototype","NumberPrototype","ObjectPrototype","ObjProto_toString","toString","ObjProto_valueOf","valueOf","Promise_all","all","Promise_reject","reject","Promise_resolve","resolve","PromiseProto_then","then","PromisePrototype","RangeErrorPrototype","ReferenceErrorPrototype","RegExpPrototype","SetIteratorPrototype","SetPrototype","StringIteratorPrototype","StringPrototype","SymbolPrototype","SyntaxErrorPrototype","ThrowTypeError","TypedArray","TypedArrayPrototype","TypeErrorPrototype","Uint8ArrayPrototype","Uint8ClampedArrayPrototype","Uint16ArrayPrototype","Uint32ArrayPrototype","URIErrorPrototype","WeakMapPrototype","WeakSetPrototype","has","add","assign","create","defineProperties","freeze","getOwnPropertyDescriptors","getOwnPropertyNames","apply","defineProperty","deleteProperty","getOwnPropertyDescriptor","getPrototypeOf","ownKeys","setPrototypeOf","hasOwnProperty","exports","module","require","runInNewContext","document","createElement","style","display","body","appendChild","contentWindow","intrinsics","init","evaluate"],"mappings":"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"}